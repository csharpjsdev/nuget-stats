@{
    var packages = PackageRepository.GetPackages(Cache);

    Response.Write(Json.Encode(new {
        TotalCount = String.Format("{0:0,0}", packages.Count),
        UniqueCount = String.Format("{0:0,0}", packages.GroupBy(p => p.Id).Count()),
        TotalDownloads = String.Format("{0:0,0}", packages.GroupBy(p => p.Id).Select(g => g.First().DownloadCount).Sum()),
    }));
}
